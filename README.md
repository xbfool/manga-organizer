# æ¼«ç”»æ”¶è—æ ‡å‡†åŒ–æ•´ç†å·¥å…·

[![Python Version](https://img.shields.io/badge/python-3.12+-blue.svg)](https://www.python.org/downloads/)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)

è‡ªåŠ¨åŒ–æ•´ç†ã€è½¬æ¢å’Œæ ‡å‡†åŒ–æ¼«ç”»æ–‡ä»¶çš„Pythonå·¥å…·ï¼Œæ”¯æŒæ—¥æ¼«ã€ç¾æ¼«ã€æ¸¯æ¼«å’Œè¿ç¯ç”»ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ” **æ™ºèƒ½æ‰«æå’Œåˆ†ç±»** - è‡ªåŠ¨è¯†åˆ«æ¼«ç”»ç±»å‹ï¼ˆæ—¥æ¼«ã€ç¾æ¼«ã€æ¸¯æ¼«ã€è¿ç¯ç”»ï¼‰
- ğŸ”„ **çœŸå®æ ¼å¼è½¬æ¢** - RAR/CBR â†’ CBZï¼ˆçœŸå®è§£å‹é‡å‹ç¼©ï¼Œéç®€å•é‡å‘½åï¼‰
- ğŸ“š **å…ƒæ•°æ®æå–** - æ™ºèƒ½è¯†åˆ«ç³»åˆ—åã€å·å·ã€ä½œè€…ã€è¯­è¨€ç‰ˆæœ¬
- ğŸ“ **æ ‡å‡†åŒ–ç›®å½•ç»“æ„** - æŒ‰ç…§è§„èŒƒçš„åˆ†ç±»è§„åˆ™é‡ç»„æ–‡ä»¶
- ğŸ·ï¸ **è§„èŒƒæ–‡ä»¶å‘½å** - ç»Ÿä¸€æ ¼å¼ï¼š`ä½œå“å - å·å·.cbz`
- ğŸŒ **å…ƒæ•°æ®æŸ¥è¯¢** - æ”¯æŒä»AniListã€ComicVineç­‰APIè·å–æ¼«ç”»ä¿¡æ¯
- ğŸ’¾ **éç ´åæ€§æ•´ç†** - ä¿ç•™åŸæ–‡ä»¶ï¼Œåˆ›å»ºæ–°ç›®å½•
- ğŸ“Š **è¯¦ç»†æŠ¥å‘Š** - ç”ŸæˆJSONæ ¼å¼çš„åˆ†æå’Œå¤„ç†æŠ¥å‘Š
- ğŸ”’ **å®‰å…¨å¯é ** - é¢„æ¼”æ¨¡å¼ã€è¯¦ç»†æ—¥å¿—ã€å¯éšæ—¶ä¸­æ–­

## ğŸ“‹ ç›®å½•

- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [å®‰è£…](#å®‰è£…)
- [ä½¿ç”¨æ–¹æ³•](#ä½¿ç”¨æ–¹æ³•)
- [ç›®å½•ç»“æ„](#ç›®å½•ç»“æ„)
- [å‘½åè§„èŒƒ](#å‘½åè§„èŒƒ)
- [å…ƒæ•°æ®æŸ¥è¯¢](#å…ƒæ•°æ®æŸ¥è¯¢)
- [é…ç½®](#é…ç½®)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
- [è´¡çŒ®](#è´¡çŒ®)
- [è®¸å¯è¯](#è®¸å¯è¯)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Python 3.12+
- [Conda](https://docs.conda.io/en/latest/miniconda.html) æˆ– Python ç¯å¢ƒç®¡ç†å·¥å…·
- [UnRAR](https://www.rarlab.com/rar_add.htm) å·¥å…·ï¼ˆå¤„ç†RAR/CBRæ–‡ä»¶å¿…éœ€ï¼‰

### Windows å¿«é€Ÿå®‰è£…

1. **å…‹éš†ä»“åº“**
```bash
git clone https://github.com/yourusername/manga-organizer.git
cd manga-organizer
```

2. **è¿è¡Œç¯å¢ƒé…ç½®è„šæœ¬**
```bash
scripts\setup_environment.bat
```

3. **æµ‹è¯•ç¯å¢ƒ**
```bash
scripts\run_test.bat
```

4. **å¼€å§‹æ•´ç†**
```bash
scripts\run_organizer.bat
```

## ğŸ“¦ å®‰è£…

### æ–¹æ³•1ï¼šä½¿ç”¨Condaï¼ˆæ¨èï¼‰

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
conda create -n manga python=3.12 -y

# æ¿€æ´»ç¯å¢ƒ
conda activate manga

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### æ–¹æ³•2ï¼šä½¿ç”¨pip

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»ç¯å¢ƒ
# Windows:
venv\Scripts\activate
# Linux/Mac:
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### å®‰è£…UnRARï¼ˆå¿…éœ€ï¼‰

#### Windows
1. ä¸‹è½½ï¼šhttps://www.rarlab.com/rar_add.htm
2. è§£å‹åˆ°å›ºå®šä½ç½®ï¼ˆå¦‚ `C:\Program Files\UnRAR\`ï¼‰
3. è„šæœ¬å·²é…ç½®è·¯å¾„ä¸º `C:\Program Files\UnRAR\UnRAR.exe`

#### Linux
```bash
sudo apt-get install unrar
```

#### macOS
```bash
brew install unrar
```

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ç”¨æ³•

1. **å°†å·¥å…·æ”¾åœ¨æ¼«ç”»æ”¶è—æ ¹ç›®å½•**

2. **è¿è¡Œä¸»è„šæœ¬**
```bash
python src/manga_organizer.py
```

3. **é€‰æ‹©æ¨¡å¼**
   - `y` - å¼€å§‹æ•´ç†ï¼ˆå®é™…æ‰§è¡Œï¼‰
   - `d` - é¢„æ¼”æ¨¡å¼ï¼ˆä»…æ˜¾ç¤ºæ•ˆæœï¼Œä¸ä¿®æ”¹æ–‡ä»¶ï¼‰
   - `n` - å–æ¶ˆ

### å‘½ä»¤è¡Œç”¨æ³•

```bash
# ç¯å¢ƒæµ‹è¯•
python src/test_environment.py

# å…ƒæ•°æ®æŸ¥è¯¢æµ‹è¯•
python src/metadata_fetcher.py

# ä¸»ç¨‹åºï¼ˆäº¤äº’æ¨¡å¼ï¼‰
python src/manga_organizer.py
```

### ä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬ï¼ˆWindowsï¼‰

```bash
# ç¯å¢ƒé…ç½®
scripts\setup_environment.bat

# ç¯å¢ƒæµ‹è¯•
scripts\run_test.bat

# è¿è¡Œæ•´ç†
scripts\run_organizer.bat
```

## ğŸ“‚ ç›®å½•ç»“æ„

### è¾“å…¥ç»“æ„ï¼ˆç¤ºä¾‹ï¼‰

```
ä½ çš„æ¼«ç”»æ–‡ä»¶å¤¹/
â”œâ”€â”€ æ—¥æ¼«/
â”‚   â”œâ”€â”€ mokuro/
â”‚   â”œâ”€â”€ å·²æ•´ç†2025/
â”‚   â””â”€â”€ æ¼«ç”»æ•´ç†-æ—¥æ¼«ä¸­æ–‡/
â”‚       â”œâ”€â”€ åäºº/
â”‚       â”‚   â”œâ”€â”€ äº•ä¸Šé›„å½¦/
â”‚       â”‚   â””â”€â”€ å°¾ç”°è£ä¸€éƒ/
â”‚       â””â”€â”€ éåäºº/
â”œâ”€â”€ ç¾æ¼«/
â”‚   â”œâ”€â”€ New52/
â”‚   â”œâ”€â”€ Marvel/
â”‚   â””â”€â”€ DC/
â”œâ”€â”€ æ¸¯æ¼«/
â””â”€â”€ è¿ç¯ç”»/
```

### è¾“å‡ºç»“æ„

```
æ¼«ç”»-å·²æ•´ç†/
â”œâ”€â”€ æ—¥æ¼«/
â”‚   â”œâ”€â”€ ä¸­æ–‡ç‰ˆ/
â”‚   â”‚   â””â”€â”€ [æ¼«ç”»å®¶]/
â”‚   â”‚       â””â”€â”€ [ä½œå“å]/
â”‚   â”‚           â”œâ”€â”€ ä½œå“å - 001.cbz
â”‚   â”‚           â”œâ”€â”€ ä½œå“å - 002.cbz
â”‚   â”‚           â””â”€â”€ ...
â”‚   â”œâ”€â”€ æ—¥æ–‡ç‰ˆ/
â”‚   â””â”€â”€ åŒè¯­ç‰ˆ/
â”œâ”€â”€ ç¾æ¼«/
â”‚   â”œâ”€â”€ æ¼«å¨/
â”‚   â”œâ”€â”€ DC/
â”‚   â””â”€â”€ å…¶ä»–/
â”œâ”€â”€ æ¸¯æ¼«/
â”‚   â””â”€â”€ [ç³»åˆ—å]/
â””â”€â”€ è¿ç¯ç”»/
    â””â”€â”€ [åˆ†ç±»]/
```

## ğŸ·ï¸ å‘½åè§„èŒƒ

### æ–‡ä»¶å‘½åæ ¼å¼

```
ä½œå“å - å·å·.cbz
```

**ç¤ºä¾‹ï¼š**
- `çŒç¯®é«˜æ‰‹ - 001.cbz`
- `Action Comics - 001.cbz`
- `ç¥å…µç„å¥‡ - 01.cbz`

### å·å·æ ¼å¼

- è‡ªåŠ¨è¡¥é›¶åˆ°3ä½ï¼ˆæ—¥æ¼«ã€æ¸¯æ¼«ï¼‰
- ä¿æŒåŸæ ¼å¼ï¼ˆç¾æ¼«é€šå¸¸å¸¦æœŸå·ï¼‰

### æ”¯æŒçš„æ–‡ä»¶æ ¼å¼

| æºæ ¼å¼ | ç›®æ ‡æ ¼å¼ | å¤„ç†æ–¹å¼ |
|--------|----------|---------|
| `.zip` | `.cbz` | é‡å‘½å |
| `.rar` | `.cbz` | çœŸå®è½¬æ¢ |
| `.cbr` | `.cbz` | çœŸå®è½¬æ¢ |
| `.cbz` | `.cbz` | ä¿æŒåŸæ · |
| `.pdf` | `.pdf` | ä¿æŒåŸæ · |

## ğŸŒ å…ƒæ•°æ®æŸ¥è¯¢

### æ”¯æŒçš„API

#### AniListï¼ˆæ—¥æ¼«ï¼‰
- âœ… å…è´¹ï¼Œæ— éœ€API key
- âœ… 50ä¸‡+ æ¡ç›®
- âœ… å¤šè¯­è¨€æ”¯æŒ

```python
from src.metadata_fetcher import MetadataFetcherManager

manager = MetadataFetcherManager()
metadata = manager.fetch_metadata("SLAM DUNK", category='æ—¥æ¼«')
print(f"ä½œè€…: {metadata.author}")
print(f"å·æ•°: {metadata.volumes}")
```

#### ComicVineï¼ˆç¾æ¼«ï¼‰
- âš ï¸ éœ€è¦å…è´¹API key
- âš ï¸ é™åˆ¶ï¼š200è¯·æ±‚/å°æ—¶

```python
manager = MetadataFetcherManager(comicvine_api_key="YOUR_API_KEY")
metadata = manager.fetch_metadata("Batman", category='ç¾æ¼«')
```

**è·å–API keyï¼š** https://comicvine.gamespot.com/api/

### æŸ¥è¯¢ç¤ºä¾‹

```bash
# æµ‹è¯•å…ƒæ•°æ®æŸ¥è¯¢
python src/metadata_fetcher.py
```

## âš™ï¸ é…ç½®

### config.json

```json
{
  "paths": {
    "target_directory": "æ¼«ç”»-å·²æ•´ç†",
    "temp_directory": ".temp_conversion"
  },
  "formats": {
    "target_format": "cbz"
  },
  "naming": {
    "format": "{series_name} - {volume}",
    "volume_padding": 3
  }
}
```

### è‡ªå®šä¹‰åˆ†ç±»å…³é”®è¯

ç¼–è¾‘ `src/manga_organizer.py`:

```python
CATEGORY_KEYWORDS = {
    'æ—¥æ¼«': ['æ—¥æ¼«', 'æ—¥æœ¬', 'japanese', 'manga', 'jp', 'ä½ çš„å…³é”®è¯'],
    'ç¾æ¼«': ['ç¾æ¼«', 'ç¾å›½', 'american', 'comics', 'marvel', 'dc'],
    # ...
}
```

## ğŸ“Š è¾“å‡ºæ–‡ä»¶

### æ—¥å¿—æ–‡ä»¶
- `manga_organizer.log` - è¯¦ç»†æ‰§è¡Œæ—¥å¿—

### æŠ¥å‘Šæ–‡ä»¶
- `manga_analysis.json` - æ‰«æåˆ†ææŠ¥å‘Š
- `manga_final_report.json` - æœ€ç»ˆå¤„ç†æŠ¥å‘Š

### æŠ¥å‘Šç»“æ„ç¤ºä¾‹

```json
{
  "timestamp": "2025-01-17T12:00:00",
  "stats": {
    "total_files": 60656,
    "processed": 12345,
    "converted": 5678,
    "errors": 10
  },
  "files": [...]
}
```

## â“ å¸¸è§é—®é¢˜

### Q: åŸæ–‡ä»¶ä¼šè¢«åˆ é™¤å—ï¼Ÿ
**A:** ä¸ä¼šã€‚è„šæœ¬åªå¤åˆ¶æ–‡ä»¶åˆ°æ–°ç›®å½•ï¼ŒåŸæ–‡ä»¶ä¿æŒä¸å˜ã€‚å¤„ç†å®ŒæˆååŸç›®å½•ä¼šè¢«é‡å‘½åä¸º `[å·²å¤„ç†]åŸç›®å½•å`ã€‚

### Q: å¤„ç†60000+æ–‡ä»¶éœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ
**A:** å–å†³äºæ–‡ä»¶å¤§å°å’Œæ˜¯å¦éœ€è¦æ ¼å¼è½¬æ¢ï¼š
- çº¯é‡å‘½å/ç§»åŠ¨ï¼šçº¦1-2å°æ—¶
- åŒ…å«RARâ†’CBZè½¬æ¢ï¼šå¯èƒ½éœ€è¦æ•°å°æ—¶

### Q: å¯ä»¥ä¸­é€”åœæ­¢å—ï¼Ÿ
**A:** å¯ä»¥ã€‚æŒ‰ `Ctrl+C` åœæ­¢ï¼Œå·²å¤„ç†çš„æ–‡ä»¶ä¼šä¿ç•™ã€‚

### Q: å¦‚ä½•æ¢å¤åŸçŠ¶ï¼Ÿ
**A:** åˆ é™¤ `æ¼«ç”»-å·²æ•´ç†` ç›®å½•ï¼Œå°†æ ‡è®°ä¸º `[å·²å¤„ç†]` çš„ç›®å½•é‡å‘½åå›åŸåå³å¯ã€‚

### Q: RARæ–‡ä»¶æ— æ³•å¤„ç†
**A:**
1. ç¡®è®¤UnRARå·²å®‰è£…
2. æ£€æŸ¥è·¯å¾„é…ç½®æ˜¯å¦æ­£ç¡®
3. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶è·å–è¯¦ç»†é”™è¯¯

### Q: æ–‡ä»¶åä¹±ç 
**A:** Windowsä¸‹å¯èƒ½éœ€è¦è®¾ç½®ç¯å¢ƒå˜é‡ï¼š
```bash
set PYTHONIOENCODING=utf-8
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- [AniList](https://anilist.co/) - æä¾›æ—¥æ¼«å…ƒæ•°æ®API
- [ComicVine](https://comicvine.gamespot.com/) - æä¾›ç¾æ¼«å…ƒæ•°æ®API
- [rarfile](https://github.com/markokr/rarfile) - Python RARæ–‡ä»¶å¤„ç†åº“

## ğŸ“® è”ç³»æ–¹å¼

- Issues: [GitHub Issues](https://github.com/yourusername/manga-organizer/issues)
- Discussions: [GitHub Discussions](https://github.com/yourusername/manga-organizer/discussions)

## ğŸ—ºï¸ è·¯çº¿å›¾

- [ ] GUIå›¾å½¢ç•Œé¢
- [ ] Webç•Œé¢
- [ ] å¤šçº¿ç¨‹å¹¶è¡Œå¤„ç†
- [ ] å°é¢ä¸‹è½½å’Œç®¡ç†
- [ ] é‡å¤æ–‡ä»¶æ£€æµ‹
- [ ] å¢é‡æ›´æ–°æ”¯æŒ
- [ ] Dockeræ”¯æŒ
- [ ] æ›´å¤šå…ƒæ•°æ®æº
- [ ] ComicInfo.xmlè‡ªåŠ¨ç”Ÿæˆ
- [ ] æ‰¹é‡é‡å‘½åå·¥å…·

---

**æ³¨æ„ï¼š** æœ¬å·¥å…·ä»…ä¾›ä¸ªäººå­¦ä¹ å’Œæ•´ç†ä½¿ç”¨ã€‚è¯·å°Šé‡ç‰ˆæƒï¼Œæ”¯æŒæ­£ç‰ˆã€‚
